<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/wkhchow/model-factory/nhsl/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>National Human Settlement Layers - OpenDRR Model Factory</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "National Human Settlement Layers";
        var mkdocs_page_input_path = "nhsl.md";
        var mkdocs_page_url = "/wkhchow/model-factory/nhsl/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> OpenDRR Model Factory
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../intro/">OpenDRR Database/SQL Documentation</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">National Human Settlement Layers</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#physical-exposure">Physical Exposure</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#source-output-tab-views">Source / Output tab (views)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#exposure">exposure</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#census">census</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#boundaries">boundaries</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_nhsl_physical_exposure">results_nhsl_physical_exposure</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql-scripts">SQL scripts</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#social-fabric">Social Fabric</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#notes_1">Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#source-output-tables-views">Source / Output tables (views)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#boundaries_1">boundaries</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#sovi">sovi</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql-scripts_1">SQL scripts</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#risk-dynamics">Risk Dynamics</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#notes_2">Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#source-output-tables-views_1">Source / Output tables (views)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql-scripts_2">SQL scripts</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#multi-hazard-threat">Multi Hazard Threat</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#notes_3">Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#source-output-tables-views_2">Source / Output tables (views)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#boundaries_2">boundaries</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#census_1">census</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#exposure_1">exposure</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#sovi_1">sovi</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mh">mh</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_nhsl_hazard_threat">results_nhsl_hazard_threat</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql-scripts_3">SQL scripts</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#earthquake-scenarios-dsra">Earthquake Scenarios (DSRA)</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#notes_4">Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#source-output-tables-views_3">Source / Output tables (views)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#boundaries_3">boundaries</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#gmf">gmf</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#dsra">dsra</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ruptures">ruptures</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#exposure_2">exposure</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#vs30">vs30</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_nhsl_physical_exposure_1">results_nhsl_physical_exposure</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_dsra_eqscenario">results_dsra_{EqScenario}</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql-scripts_4">SQL scripts</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#seismic-risk-model-psra">Seismic Risk Model (PSRA)</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#notes_5">Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#source-output-tables-views_4">Source / Output tables (views)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#boundaries_4">boundaries</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#exposure_3">exposure</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#lut">lut</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mh_1">mh</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#psra_pt">psra_{P/T}</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#psra_canada">psra_canada</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_psra_pt">results_psra_{P/T}</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_psra_canada">results_psra_canada</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#results_psra_national">results_psra_national</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#vs30_1">vs30</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql-scripts_5">SQL scripts</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../schemas/">Schemas</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">OpenDRR Model Factory</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">National Human Settlement Layers</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="national-human-settlement-layers">National Human Settlement Layers</h1>
<h2 id="physical-exposure">Physical Exposure</h2>
<ul>
<li>
<h3 id="notes">Notes</h3>
<ul>
<li><strong>Github Repo</strong><ul>
<li>Latest geopackages, data dictionary, documentation etc.</li>
<li><a href="https://opendrr.github.io/national-human-settlement/en/#nhsl_physical_exposure_indicators-a">https://opendrr.github.io/national-human-settlement/en/#nhsl_physical_exposure_indicators-a</a></li>
</ul>
</li>
<li><strong>Github page</strong><ul>
<li><a href="https://opendrr.github.io/national-human-settlement/en/index.html">https://opendrr.github.io/national-human-settlement/en/index.html</a></li>
</ul>
</li>
<li><strong>working notes</strong> (google sheet)<ul>
<li>2_physical-exposure-schema.xlsx<ul>
<li>Worksheet where initial phase of indicators were drafted.</li>
<li><a href="https://docs.google.com/spreadsheets/d/1dsVOAbUAp-V0Xu-dINVbchUzyQZ6EmE_/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true">https://docs.google.com/spreadsheets/d/1dsVOAbUAp-V0Xu-dINVbchUzyQZ6EmE_/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="source-output-tab-views">Source / Output tab (views)</h3>
<ul>
<li>This section lists the schemas involved with the creation of the final results, and specific tables involved. Refer to <a href="../schemas/">schemas</a> section for more schema details. </li>
</ul>
<h4 id="exposure"><a href="../schemas/#exposure">exposure</a></h4>
<ul>
<li>canada_exposure</li>
</ul>
<h4 id="census"><a href="../schemas/#census">census</a></h4>
<ul>
<li>census_2016_canada</li>
</ul>
<h4 id="boundaries"><a href="../schemas/#boundaries">boundaries</a></h4>
<ul>
<li>Geometry_SAUID</li>
<li>HexGrid_1km(_3857), HexGrid_1km_unclipped(_3857)</li>
<li>HexGrid_5km(_3857), HexGrid_5km_unclipped(_3857)</li>
<li>HexGrid_10km(_3857), HexGrid_10km_unclipped(_3857) </li>
<li>HexGrid_25km(_3857), HexGrid_25km_unclipped(_3857) </li>
<li>HexGrid_50km_unclipped(_3857)</li>
<li>HexGrid_100km_unclipped(_3857)</li>
<li>SAUID_HexGrid_1km_intersect(_3857), SAUID_HexGrid_1km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_5km_intersect(_3857), SAUID_HexGrid_5km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_10km_intersect(_3857), SAUID_HexGrid_10km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_25km_intersect(_3857), SAUID_HexGrid_25km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_50km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_100km_intersect_unclipped(_3857), </li>
<li>HexGrid_GlobalFabric,</li>
<li>Sauid_HexGrid_GlobalFabric_intersect</li>
</ul>
<h4 id="results_nhsl_physical_exposure"><a href="../schemas/#results_nhsl_physical_exposure">results_nhsl_physical_exposure</a></h4>
<ul>
<li>All tables/views in this schema are results of physical exposure. </li>
</ul>
<h3 id="sql-scripts">SQL scripts</h3>
<ul>
<li><strong>Create_table_canada_exposure.sql</strong>
        - Script used to create canada_exposure table from BldgExpRef_CA_master_v3p2.csv.</li>
<li><strong>Create_table_2016_census_v3.sql</strong><ul>
<li>Script to create source table for census-attributes-2016.csv.</li>
</ul>
</li>
<li><strong>Create_physical_exposure_building_indicators_PhysicalExposure.sql</strong><ul>
<li>Script using exposure source, and Geometry_SAUID tables to generate building level indicators for all of Canada. Subsequent views for each province/territory are generated. </li>
</ul>
</li>
<li><strong>Create_physical_exposure_sauid_indicators_view_PhysicalExposure.sql</strong><ul>
<li>Script using exposure source,census_2016_canada, and Geometry_SAUID tables to generate sauid level indicators for all of Canada. Subsequent views for each province/territory are generated.</li>
<li>Indicators that are from building level are aggregated up to sauid using aggregation functions (SUM, AVG, MIN, MAX, GROUP BY etc).</li>
</ul>
</li>
<li><strong>Create_hexgrid_physical_exposure_aggregation_area_proxy.sql</strong><ul>
<li>Physical exposure indicators (sauid) aggregated/proxied into various hexgrid of various sizes and (1km, 5km, 10km, 25km, 50km, 100km) and between clipped and unclipped versions.</li>
<li>Script uses nhsl_physical_exposure_indicators_s, SAUID_HexGrid_(1,5,10,25,50,100)km_intersect, and HexGrid_(1,5,10,25,50,100)km  to create the various physical exposure hexgrid views.</li>
</ul>
</li>
<li><strong>Create_hexgrid_physical_exposure_aggregation_area_proxy_3857.sql</strong><ul>
<li>Same method of Create_hexgrid_physical_exposure_aggregation_area_proxy.sql, except the geometry tables of SAUID_HexGrid_(1,5,10,25,50,100)km_intersect_3857 and HexGrid_(1,5,10,25,50,100)km_3857 are generated in EPSG 3857, resulting in the creation of various physical exposure hexgrid views in EPSG 3857.</li>
</ul>
</li>
<li><strong>Create_all_tables_update.sql</strong><ul>
<li>Script to create and or update various tables in the opendrr db such as creating temp tables, adding geometry columns, and creating indexes etc.</li>
</ul>
</li>
</ul>
<h2 id="social-fabric">Social Fabric</h2>
<ul>
<li>
<h3 id="notes_1">Notes</h3>
<ul>
<li><strong>Github Repo</strong><ul>
<li>Latest geopackages, data dictionary, documentation etc.<ul>
<li><a href="https://opendrr.github.io/national-human-settlement/en/#nhsl_social_fabric_indicators-a">https://opendrr.github.io/national-human-settlement/en/#nhsl_social_fabric_indicators-a</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Github page</strong><ul>
<li><a href="https://opendrr.github.io/national-human-settlement/en/index.html">https://opendrr.github.io/national-human-settlement/en/index.html</a></li>
</ul>
</li>
<li><strong>working notes</strong> (google sheet)<ul>
<li>social-vulnerability-schema.xlsx<ul>
<li>Worksheet where initial phase of indicators were drafted.</li>
<li><a href="https://docs.google.com/spreadsheets/d/1t2VRUVZ6RKKNWdTw4TNvekZzjIoJRpxS/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true">https://docs.google.com/spreadsheets/d/1t2VRUVZ6RKKNWdTw4TNvekZzjIoJRpxS/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="source-output-tables-views">Source / Output tables (views)</h3>
<ul>
<li>This section lists the schemas involved with the creation of the final results, and specific tables involved. Refer to <a href="../schemas/">schemas</a> section for more schema details. </li>
</ul>
<h4 id="boundaries_1"><a href="../schemas/#boundaries">boundaries</a></h4>
<ul>
<li>Geometry_SAUID</li>
<li>HexGrid_1km(_3857), HexGrid_1km_unclipped(_3857)</li>
<li>HexGrid_5km(_3857), HexGrid_5km_unclipped(_3857)</li>
<li>HexGrid_10km(_3857), HexGrid_10km_unclipped(_3857) </li>
<li>HexGrid_25km(_3857), HexGrid_25km_unclipped(_3857) </li>
<li>HexGrid_50km_unclipped(_3857)</li>
<li>HexGrid_100km_unclipped(_3857)</li>
<li>SAUID_HexGrid_1km_intersect(_3857), SAUID_HexGrid_1km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_5km_intersect(_3857), SAUID_HexGrid_5km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_10km_intersect(_3857), SAUID_HexGrid_10km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_25km_intersect(_3857), SAUID_HexGrid_25km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_50km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_100km_intersect_unclipped(_3857), </li>
<li>HexGrid_GlobalFabric,</li>
<li>Sauid_HexGrid_GlobalFabric_intersect</li>
</ul>
<h4 id="sovi"><a href="../schemas/#sovi">sovi</a></h4>
<ul>
<li>sovi_sauid_nov2021</li>
</ul>
<p><a href="../schemas/#results_nhsl_social_fabric">results_nhsl_social_fabric</a>
- All tables/views in this schema are results of social fabric. </p>
<h3 id="sql-scripts_1">SQL scripts</h3>
<ul>
<li><strong>Create_table_sovi_sauid.sql</strong><ul>
<li>Script used to create source sovi_sauid_nov2021 table from sovi_sauid_nov2021.csv.</li>
</ul>
</li>
<li><strong>Create_social_vulnerability_sauid_indicators_SocialFabric.sql</strong><ul>
<li>Script used to generate the final indicators for social fabric. The source table has all been pregenerated and this script renames the indicators to the appropriate name as well as attaching various aggregation ID’s and sauid geometry.</li>
<li><strong>Create_hexgrid_social_vulnerability_aggregation_area_proxy.sql</strong><ul>
<li>Social fabric indicators (sauid) aggregated/proxied into various hexgrid of various sizes and (1km, 5km, 10km, 25km, 50km, 100km) and between clipped and unclipped versions.</li>
<li>Script uses nhsl_social_fabric_indicators_s, SAUID_HexGrid_(1,5,10,25,50,100)km_intersect, and HexGrid_(1,5,10,25,50,100)km  to create the various social fabric hexgrid views.</li>
</ul>
</li>
<li><strong>Create_hexgrid_social_vulnerability_aggregation_area_proxy_3857.sql</strong><ul>
<li>Same method of Create_hexgrid_social_vulnerability_aggregation_area_proxy.sql except the geometry tables of SAUID_HexGrid_(1,5,10,25,50,100)km_intersect_3857 and HexGrid_(1,5,10,25,50,100)km_3857 are generated in EPSG 3857.</li>
</ul>
</li>
<li><strong>Create_all_tables_update.sql</strong><ul>
<li>Script to create and or update various tables in the opendrr db such as creating temp tables, adding geometry columns, and creating indexes etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="risk-dynamics">Risk Dynamics</h2>
<ul>
<li>
<h3 id="notes_2">Notes</h3>
<ul>
<li>Draft indicators were generated but not released, and are not intended for the public.</li>
<li>Risk Dynamics contains population growth, land use change indicators for 1975, 1990, 2000, and 2015 for all of Canada over a 250m population grid.</li>
</ul>
</li>
</ul>
<h3 id="source-output-tables-views_1">Source / Output tables (views)</h3>
<ul>
<li>
<p>This section lists the schemas involved with the creation of the final results, and specific tables involved. Refer to <a href="../schemas/">schemas</a> section for more schema details. </p>
</li>
<li>
<p><a href="../schemas/#ghsl">ghsl</a></p>
<ul>
<li>ghsl_mh_intensity_ghsl</li>
</ul>
</li>
<li>
<p><a href="../schemas/#results_nhsl_risk_dynamics">results_nhsl_risk_dynamics</a></p>
<ul>
<li>All tables/views in this schema are results of risk dynamics.</li>
</ul>
</li>
</ul>
<h3 id="sql-scripts_2">SQL scripts</h3>
<ul>
<li><strong>Create_table_GHSL.sql</strong><ul>
<li>Script used to create ghsl_mh_internsity_ghsl table from mh-internsity-ghsl.csv</li>
</ul>
</li>
<li><strong>Create_risk_dynamics_indicators.sql</strong><ul>
<li>Script used to generate the final indicators for risk dynamics. Source table had all the final indicator values, and this script renames indicators to appropriate names.</li>
</ul>
</li>
<li><strong>Create_all_tables_update.sql</strong><ul>
<li>Script to create and or update various tables in the opendrr db such as creating temp tables, adding geometry columns, and creating indexes etc.</li>
</ul>
</li>
</ul>
<h2 id="multi-hazard-threat">Multi Hazard Threat</h2>
<ul>
<li>
<h3 id="notes_3">Notes</h3>
<ul>
<li>Draft indicators were generated but not released, and are not intended for the public.</li>
<li>The Hazard threat value contains scores based on different hazards, and pregenerated threshold lookup tables. Using source information from multi hazard, physical exposure indicators, social fabric indicators, and census a series of calculations are made (prereq tables). These values are compared against the threshold lookup tables and assigned scores.</li>
<li><strong>working notes</strong> (google sheet)<ul>
<li>3_multi-hazard-threat-schema.xlsx</li>
<li>worksheet where initial phase of indicators were drafted</li>
<li><a href="https://docs.google.com/spreadsheets/d/1bSJGmk4O8iwV-UJGdN1D6sHOZjfEzVtO/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true">https://docs.google.com/spreadsheets/d/1bSJGmk4O8iwV-UJGdN1D6sHOZjfEzVtO/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="source-output-tables-views_2">Source / Output tables (views)</h3>
<ul>
<li>This section lists the schemas involved with the creation of the final results, and specific tables involved. Refer to <a href="../schemas/">schemas</a> section for more schema details. </li>
</ul>
<h4 id="boundaries_2"><a href="../schemas/#boundaries">boundaries</a></h4>
<ul>
<li>Geometry_SAUID</li>
<li>HexGrid_1km(_3857), HexGrid_1km_unclipped(_3857)</li>
<li>HexGrid_5km(_3857), HexGrid_5km_unclipped(_3857)</li>
<li>HexGrid_10km(_3857), HexGrid_10km_unclipped(_3857) </li>
<li>HexGrid_25km(_3857), HexGrid_25km_unclipped(_3857) </li>
<li>HexGrid_50km_unclipped(_3857)</li>
<li>HexGrid_100km_unclipped(_3857)</li>
<li>SAUID_HexGrid_1km_intersect(_3857), SAUID_HexGrid_1km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_5km_intersect(_3857), SAUID_HexGrid_5km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_10km_intersect(_3857), SAUID_HexGrid_10km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_25km_intersect(_3857), SAUID_HexGrid_25km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_50km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_100km_intersect_unclipped(_3857), </li>
<li>HexGrid_GlobalFabric,</li>
<li>Sauid_HexGrid_GlobalFabric_intersect</li>
</ul>
<h4 id="census_1"><a href="../schemas/#census">census</a></h4>
<ul>
<li>census_2016_canada</li>
</ul>
<h4 id="exposure_1"><a href="../schemas/#exposure">exposure</a></h4>
<ul>
<li>canada_exposure</li>
</ul>
<h4 id="sovi_1"><a href="../schemas/#sovi">sovi</a></h4>
<ul>
<li>sovi_sauid_nov2021</li>
</ul>
<h4 id="mh"><a href="../schemas/#mh">mh</a></h4>
<ul>
<li>mh_intensity_canada</li>
<li>mh_ratings_thresholds</li>
</ul>
<h4 id="results_nhsl_hazard_threat"><a href="../schemas/#results_nhsl_hazard_threat">results_nhsl_hazard_threat</a></h4>
<ul>
<li>All tables/views in this schema are results of multi hazard threat.</li>
</ul>
<h3 id="sql-scripts_3">SQL scripts</h3>
<ul>
<li><strong>Create_table_mh_intensity_canada_v2.sql</strong><ul>
<li>Script to create mh_intensity_canada table from HTi_sauid.csv.</li>
</ul>
</li>
<li><strong>Create_table_mh_rating_thresholds.sql</strong><ul>
<li>Script to create mh_ratings_thresholds from hazard_threat_rating_thresholds.csv.</li>
</ul>
</li>
<li><strong>Create_table_mh_thresholds.sql</strong><ul>
<li>Script to create mh_thresholds from HTi_thresholds.csv.</li>
</ul>
</li>
<li><strong>Create_MH_risk_sauid_prioritization_prereq_tables.sql</strong><ul>
<li>Script to calculate hazard threat value prereq table required for generating MH indicators.</li>
</ul>
</li>
<li><strong>Create_MH_risk_sauid_prioritization_Canada.sql</strong><ul>
<li>Script to generate MH threat indicators at the sauid and csd level.</li>
</ul>
</li>
<li><strong>Create_hexgrid_MH_risk_sauid_prioritization_aggregation_area.sql</strong><ul>
<li>MH indicators (sauid) aggregated/proxied into various hexgrid of various sizes and (1km, 5km, 10km, 25km, 50km, 100km) and between clipped and unclipped versions.</li>
<li>Script uses nhsl_hazard_threat_indicators_s_tbl, SAUID_HexGrid_(1,5,10,25,50,100)km_intersect, and HexGrid_(1,5,10,25,50,100)km  to create the various physical exposure hexgrid views.</li>
</ul>
</li>
<li><strong>Create_hexgrid_MH_risk_sauid_prioritization_aggregation_area_3857.sql</strong><ul>
<li>Same method of Create_hexgrid_MH_risk_sauid_prioritization_aggregation_area.sqll, except the geometry tables of SAUID_HexGrid_(1,5,10,25,50,100)km_intersect_3857 and HexGrid_(1,5,10,25,50,100)km_3857 are generated in EPSG 3857, resulting in the creation of various physical exposure hexgrid views in EPSG 3857.</li>
</ul>
</li>
</ul>
<h2 id="earthquake-scenarios-dsra">Earthquake Scenarios (DSRA)</h2>
<ul>
<li>
<h3 id="notes_4">Notes</h3>
<ul>
<li><strong>Github Repo</strong><ul>
<li>Latest geopackages, data dictionary, documentation etc.</li>
<li><a href="https://opendrr.github.io/national-human-settlement/en/#nhsl_physical_exposure_indicators-a">https://opendrr.github.io/national-human-settlement/en/#nhsl_physical_exposure_indicators-a</a></li>
</ul>
</li>
<li><strong>Github page</strong><ul>
<li><a href="https://opendrr.github.io/earthquake-scenarios/en/index.html">https://opendrr.github.io/earthquake-scenarios/en/index.html</a></li>
</ul>
</li>
<li><strong>working notes</strong> (google sheet)<ul>
<li>3_multi-hazard-threat-schema.xlsx<ul>
<li>Worksheet where initial phase of indicators were drafted.</li>
<li><a href="https://docs.google.com/spreadsheets/d/1bSJGmk4O8iwV-UJGdN1D6sHOZjfEzVtO/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true">https://docs.google.com/spreadsheets/d/1bSJGmk4O8iwV-UJGdN1D6sHOZjfEzVtO/edit?usp=sharing&amp;ouid=108110519296938878163&amp;rtpof=true&amp;sd=true</a></li>
</ul>
</li>
<li>mapping Sendai Indicators DSRA/PSRA<ul>
<li><a href="https://docs.google.com/spreadsheets/d/12nacK6YtvJ0ABwpL9OpV8kwjnZi-PRXLlYjcLnR-x2c/edit#gid=0">https://docs.google.com/spreadsheets/d/12nacK6YtvJ0ABwpL9OpV8kwjnZi-PRXLlYjcLnR-x2c/edit#gid=0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="source-output-tables-views_3">Source / Output tables (views)</h3>
<ul>
<li>This section lists the schemas involved with the creation of the final results, and specific tables involved. Refer to <a href="../schemas/">schemas</a> section for more schema details. </li>
<li>All source csv files are from the earthquake scenario finished folder.<ul>
<li><a href="https://github.com/OpenDRR/earthquake-scenarios/tree/master/FINISHED">https://github.com/OpenDRR/earthquake-scenarios/tree/master/FINISHED</a></li>
</ul>
</li>
</ul>
<h4 id="boundaries_3"><a href="../schemas/#boundaries">boundaries</a></h4>
<ul>
<li>Geometry_SAUID</li>
<li>HexGrid_1km(_3857), HexGrid_1km_unclipped(_3857)</li>
<li>HexGrid_5km(_3857), HexGrid_5km_unclipped(_3857)</li>
<li>HexGrid_10km(_3857), HexGrid_10km_unclipped(_3857) </li>
<li>HexGrid_25km(_3857), HexGrid_25km_unclipped(_3857) </li>
<li>HexGrid_50km_unclipped(_3857)</li>
<li>HexGrid_100km_unclipped(_3857)</li>
<li>SAUID_HexGrid_1km_intersect(_3857), SAUID_HexGrid_1km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_5km_intersect(_3857), SAUID_HexGrid_5km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_10km_intersect(_3857), SAUID_HexGrid_10km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_25km_intersect(_3857), SAUID_HexGrid_25km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_50km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_100km_intersect_unclipped(_3857), </li>
<li>HexGrid_GlobalFabric,</li>
<li>Sauid_HexGrid_GlobalFabric_intersect</li>
</ul>
<h4 id="gmf"><a href="../schemas/#gmf">gmf</a></h4>
<ul>
<li>shakemap_{EqScenario}</li>
<li>shakemap_{EqScenario}_xref</li>
<li>shakemap_scenario_extents_temp</li>
</ul>
<h4 id="dsra"><a href="../schemas/#dsra">dsra</a></h4>
<ul>
<li>dsra_{EqScenario}</li>
</ul>
<h4 id="ruptures"><a href="../schemas/#ruptures">ruptures</a></h4>
<ul>
<li>rupture_table</li>
</ul>
<h4 id="exposure_2"><a href="../schemas/#exposure">exposure</a></h4>
<ul>
<li>canada_exposure</li>
</ul>
<h4 id="vs30"><a href="scheams.md#vs30">vs30</a></h4>
<ul>
<li>vs30_can_site_model_xref</li>
</ul>
<h4 id="results_nhsl_physical_exposure_1"><a href="../schemas/#results_nhsl_physical_exposure">results_nhsl_physical_exposure</a></h4>
<ul>
<li>nhsl_physical_exposure_indicators_b</li>
<li>nhsl_physical_exposure_indicators_s</li>
</ul>
<h4 id="results_dsra_eqscenario"><a href="../schemas/#results_dsra_{EqScenario}">results_dsra_{EqScenario}</a></h4>
<ul>
<li>All tables/views in this schema are results of earthquake scenario.</li>
</ul>
<h3 id="sql-scripts_4">SQL scripts</h3>
<ul>
<li>A series of python scripts written by Drew Rotheram-Clarke to process the various csv files for each scenario into various dsra related tables.<ul>
<li>DSRA_outputs2postgres_lfs.py</li>
<li>DSRA_runCreateTableShakemap.py</li>
<li>DSRA_ruptures2postgres.py</li>
<li>DSRA_createRiskProfileIndicators.py</li>
</ul>
</li>
<li><strong>Create_scenario_risk_master_tables.sql</strong><ul>
<li>Script to attach rupture info to shakemap extents table.</li>
</ul>
</li>
<li><strong>Create_scenario_risk_building_Indicators_ALL_shkmp_3857.sql</strong><ul>
<li>Script to generate various shakemap, shakemap hexgrid, displaced household calculations, and dsra_{eqScenario}_inidcators_b tables/views.</li>
</ul>
</li>
<li><strong>Create_scenario_risk_sauid_Indicators_ALL_shkmp_3857.sql</strong><ul>
<li>Script to generate various required shelter calculations, and dsra_{eqScenario}_indicators_s, and dsra_{eqScenario}_indicators_csd tables and views.</li>
</ul>
</li>
<li><strong>Create_all_tables_update.sql</strong><ul>
<li>Script to create and or update various tables in the opendrr db such as creating temp tables, adding geometry columns, and creating indexes etc.</li>
</ul>
</li>
<li><strong>Create_table_vs_30_CAN_site_model.sql</strong><ul>
<li>Script to create source table source table for site-vgrid_CA.csv.</li>
</ul>
</li>
<li><strong>Create_table_vs_30_CAN_site_model_xref.sql</strong><ul>
<li>Script to create source table source table for vs30_CAN_site_model_xref.csv.</li>
</ul>
</li>
</ul>
<h2 id="seismic-risk-model-psra">Seismic Risk Model (PSRA)</h2>
<ul>
<li>
<h3 id="notes_5">Notes</h3>
<ul>
<li><strong>Github Repo</strong><ul>
<li>Latest geopackages, data dictionary, documentation etc.<ul>
<li><a href="https://github.com/OpenDRR/seismic-risk-model">https://github.com/OpenDRR/seismic-risk-model</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Github page</strong><ul>
<li><a href="https://opendrr.github.io/seismic-risk-model/en/">https://opendrr.github.io/seismic-risk-model/en/</a></li>
</ul>
</li>
<li><strong>working notes</strong> (google sheet)<ul>
<li>mapping Sendai Indicators DSRA/PSRA</li>
<li><a href="https://docs.google.com/spreadsheets/d/12nacK6YtvJ0ABwpL9OpV8kwjnZi-PRXLlYjcLnR-x2c/edit#gid=0">https://docs.google.com/spreadsheets/d/12nacK6YtvJ0ABwpL9OpV8kwjnZi-PRXLlYjcLnR-x2c/edit#gid=0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="source-output-tables-views_4">Source / Output tables (views)</h3>
<ul>
<li>This section lists the schemas involved with the creation of the final results, and specific tables involved. Refer to <a href="../schemas/">schemas</a> section for more schema details. </li>
<li>All source csv files are from the seismic risk model repo in various output repos.<ul>
<li><a href="https://github.com/OpenDRR/seismic-risk-model/tree/master">https://github.com/OpenDRR/seismic-risk-model/tree/master</a></li>
</ul>
</li>
</ul>
<h4 id="boundaries_4"><a href="../schemas/#boundaries">boundaries</a></h4>
<ul>
<li>Geometry_SAUID</li>
<li>HexGrid_1km(_3857), HexGrid_1km_unclipped(_3857)</li>
<li>HexGrid_5km(_3857), HexGrid_5km_unclipped(_3857)</li>
<li>HexGrid_10km(_3857), HexGrid_10km_unclipped(_3857) </li>
<li>HexGrid_25km(_3857), HexGrid_25km_unclipped(_3857) </li>
<li>HexGrid_50km_unclipped(_3857)</li>
<li>HexGrid_100km_unclipped(_3857)</li>
<li>SAUID_HexGrid_1km_intersect(_3857), SAUID_HexGrid_1km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_5km_intersect(_3857), SAUID_HexGrid_5km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_10km_intersect(_3857), SAUID_HexGrid_10km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_25km_intersect(_3857), SAUID_HexGrid_25km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_50km_intersect_unclipped(_3857), </li>
<li>SAUID_HexGrid_100km_intersect_unclipped(_3857), </li>
<li>HexGrid_GlobalFabric,</li>
<li>Sauid_HexGrid_GlobalFabric_intersect</li>
</ul>
<h4 id="exposure_3"><a href="../schemas/#exposure">exposure</a></h4>
<ul>
<li>canada_exposure</li>
</ul>
<h4 id="lut"><a href="../schemas/#lut">lut</a></h4>
<ul>
<li>collapse_probability</li>
<li>psra_source_types</li>
</ul>
<h4 id="mh_1"><a href="scheams.md#mh">mh</a></h4>
<ul>
<li>mh_intensity_canada</li>
</ul>
<h4 id="psra_pt"><a href="../schemas/#psra_pt">psra_{P/T}</a></h4>
<ul>
<li>All tables in this schema are used for results_psra_{P/T}.</li>
</ul>
<h4 id="psra_canada"><a href="../schemas/#psra_canada">psra_canada</a></h4>
<ul>
<li>All tables in this schema are used for results_psra_canada.</li>
</ul>
<h4 id="results_psra_pt"><a href="../schemas/#results_psra_pt">results_psra_{P/T}</a></h4>
<ul>
<li>All tables/views in this schema are results of seismic risk model.</li>
</ul>
<h4 id="results_psra_canada"><a href="../schemas/#results_psra_canada">results_psra_canada</a></h4>
<ul>
<li>All tables/views in this schema are results of seismic risk model.</li>
</ul>
<h4 id="results_psra_national"><a href="../schemas/#results_psra_national">results_psra_national</a></h4>
<ul>
<li>All tables/views in this schema are results of seismic risk model. Results from results_psra_{P/T} are merged in this schema.</li>
</ul>
<h4 id="vs30_1"><a href="scheams.md#vs30">vs30</a></h4>
<ul>
<li>vs30_can_site_model_xref</li>
</ul>
<h3 id="sql-scripts_5">SQL scripts</h3>
<ul>
<li>psra_0.create_psra_schema.sql<ul>
<li>Create default psra_{P/T}, psra_canada schemas.</li>
</ul>
</li>
<li>psra_1.Create_tables_Canada.sql<ul>
<li>Create default empty psra_canada schema tables to be loaded. These tables are direct copies from seismic risk model repo.</li>
</ul>
</li>
<li>psra_1.Create_tables.sql<ul>
<li>Create default empty psra_{P/T} schema tables to be loaded. These tables are direct copies from seismic risk model repo.</li>
</ul>
</li>
<li>psra_2.Create_table_updates_Canada.sql<ul>
<li>Creates finalized tables from tables loaded in psra_1.Create_tables_Canada.sql. Previous tables are deleted.</li>
</ul>
</li>
<li>psra_2.Create_table_updates.sql<ul>
<li>Creates finalized tables from tables loaded in psra_1.Create_tables.sql. Previous tables are deleted.</li>
</ul>
</li>
<li>psra_3.Create_psra_building_all_indicators.sql<ul>
<li>Create finalized building level indicators for each result_psra_{P/T} schema.</li>
</ul>
</li>
<li>psra_4.Create_psra_sauid_all_indicators_Canada.sql<ul>
<li>Create finalized sauid level indicators for results_psra_canada schema.</li>
</ul>
</li>
<li>psra_4.Create_psra_sauid_all_indicators.sql</li>
<li>psra_5.Create_psra_sauid_references_indicators.sql<ul>
<li>Create finalized reference indicators psra_{P/T}_src_loss for each result_psra_{P/T} schema.</li>
</ul>
</li>
<li>psra_6.Create_psra_merge_into_national_indicators.sql<ul>
<li>National indicators are results from the various results_psra_{P/T} schema, including psra_{P/T}_indicators_b, psra_{P/T}_indicators_s, psra_{P/T}_indicators_csd, psra_{P/T}_expected_loss_fsa, psra_{P/T}<em>agg_loss_fsa, and psra</em>{P/T}_src_loss tables that are merged together into a one national table for each of the tables above. After merging, earthquake risk index calculations are made for indicators_s, and indicators_csd tables and updated. The EQRI values are then updated in the corresponding results_psra_{P/T} as well.</li>
</ul>
</li>
<li>psra_6a.eqri_calculation_sa.sql<ul>
<li>Create seismic risk index (eqri) calculations used for settled area.</li>
</ul>
</li>
<li>psra_6a1.eqri_calculation_csd.sql<ul>
<li>Create seismic risk index (eqri) calculations used for csd.</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_1km_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 1km hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_1km_uc_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 1km hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_1km_uc.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 1km unclipped hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_1km.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 1km unclipped hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_5km_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 5km hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_5km_uc_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 5km hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_5km_uc.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 5km unclipped hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_5km.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 5km unclipped hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_10km_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 10km hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_10km_uc_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 10km unclipped hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_10km_uc.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 10km unclipped hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_10km.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 10km hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_25km_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 25km hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_25km_uc_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 25km unclipped hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_25km_uc.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 25km unclipped hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_25km.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 25km hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_50km_uc_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 50km unclipped hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_50km_uc.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 50km unclipped hexgrid (EPSG 4326).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_100km_uc_3857.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 100km unclipped hexgrid (EPSG 3857).</li>
</ul>
</li>
<li>psra_6a2.eqri_calculation_hexgrid_100km_uc.sql<ul>
<li>Create seismic risk index (eqri) calculations used for 100km unclipped hexgrid (EPSG 4326).</li>
</ul>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../intro/" class="btn btn-neutral float-left" title="OpenDRR Database/SQL Documentation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../schemas/" class="btn btn-neutral float-right" title="Schemas">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../intro/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../schemas/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
